{% extends 'launch_tracker/base.html' %}

{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<section id="launches">
    <h2>Past Launches</h2>
<form method="get" class="sort-form">
    <label for="sort">Sort by:</label>
    <select name="sort_by" id="sort" onchange="this.form.submit()">
        <option value="">-- Choose --</option>
        <option value="name-asc" {% if sort_option == 'name-asc' %}selected{% endif %}>Name (A-Z)</option>
        <option value="name-desc" {% if sort_option == 'name-desc' %}selected{% endif %}>Name (Z-A)</option>
        <option value="date-asc" {% if sort_option == 'date-asc' %}selected{% endif %}>Date (Oldest First)</option>
        <option value="date-desc" {% if sort_option == 'date-desc' %}selected{% endif %}>Date (Newest First)</option>
    </select>
</form>
    <div class="launch-grid">
        {% for launch in launches %}
        <div class="launch-card">
            <img src="{{ launch.image }}" alt="Patch">
            <h3>{{ launch.name }}</h3>
            <p class="launch-description">
                {% if launch.details %}
                    {{ launch.details|slice:":150" }}{% if launch.details|length > 100 %}...{% endif %}
                {% else %}
                    No description available
                {% endif %}
            </p>
            <p><strong>Date:</strong> {{ launch.date|date:"Y-m-d H:i" }}</p>
            <p><strong>Flight #:</strong> {{ launch.flight_number }}</p>
            <p>
                <a href="{{ launch.youtube }}" target="_blank">â–¶ YouTube</a> |
                <a href="{{ launch.article }}" target="_blank">Article</a> |
                <a href="{{ launch.wikipedia }}" target="_blank">Wikipedia</a>
            </p>
            <a href="{% url 'page' launch.id %}">Read More</a>
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/script.js' %}"></script>
{% endblock %}
